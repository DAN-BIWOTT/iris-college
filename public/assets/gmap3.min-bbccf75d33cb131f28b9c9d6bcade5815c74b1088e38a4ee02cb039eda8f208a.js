/*!
 *  GMAP3 Plugin for jQuery
 *  Version   : 6.0.0
 *  Date      : 2014-04-25
 *  Author    : DEMONTE Jean-Baptiste
 *  Contact   : jbdemonte@gmail.com
 *  Web site  : http://gmap3.net
 *  Licence   : GPL v3 : http://www.gnu.org/licenses/gpl.html
 *  
 *  Copyright (c) 2010-2014 Jean-Baptiste DEMONTE
 *  All rights reserved.
 */
!function(t,n){function e(t){return"object"==typeof t}function o(t){return"string"==typeof t}function a(t){return"number"==typeof t}function i(t){return t===n}function r(){var n;A=google.maps,U||(U={NaN:!1,NaN:{NaN:5,NaN:250,NaN:250},NaN:(n={},t.each("Map Marker InfoWindow Circle Rectangle OverlayView StreetViewPanorama KmlLayer TrafficLayer BicyclingLayer GroundOverlay StyledMapType ImageMapType".split(" "),function(t,e){n[e]=A[e]}),n),NaN:{NaN:A.MapTypeId.ROADMAP,NaN:[46.578498,2.457275],NaN:2},NaN:{NaN:"floatPane",NaN:"",NaN:{NaN:0,NaN:0}},NaN:{NaN:{NaN:6e4,NaN:5e3}}})}function s(t,n){return i(t)?"gmap3_"+(n?Z+1:++Z):t}function u(t){var n,e=A.version.split(".");for(t=t.split("."),n=0;n<e.length;n++)e[n]=parseInt(e[n],10);for(n=0;n<t.length;n++){if(t[n]=parseInt(t[n],10),!e.hasOwnProperty(n))return!1;if(e[n]<t[n])return!1}return!0}function l(n,e,o,a,i){function r(e,a){e&&t.each(e,function(t,e){var r=n,s=e;R(e)&&(r=e[0],s=e[1]),a(o,t,function(t){s.apply(r,[i||o,t,u])})})}var s=e.td||{},u={NaN:a,NaN:s.data,NaN:s.tag};r(s.events,A.event.addListener),r(s.onces,A.event.addListenerOnce)}function c(t){var n,e=[];for(n in t)t.hasOwnProperty(n)&&e.push(n);return e}function d(t,n){var e,o=arguments;for(e=2;e<o.length;e++)if(n in o[e]&&o[e].hasOwnProperty(n))return void(t[n]=o[e][n])}function p(n,e){var o,a,i=["data","tag","id","events","onces"],r={};if(n.td)for(o in n.td)n.td.hasOwnProperty(o)&&"options"!==o&&"values"!==o&&(r[o]=n.td[o]);for(a=0;a<i.length;a++)d(r,i[a],e,n.td);return r.options=t.extend({},n.opts||{},e.options||{}),r}function f(){if(U.verbose){var t,n=[];if(window.console&&q(console.error)){for(t=0;t<arguments.length;t++)n.push(arguments[t]);console.error.apply(console,n)}else{for(n="",t=0;t<arguments.length;t++)n+=arguments[t].toString()+" ";alert(n)}}}function g(t){return(a(t)||o(t))&&""!==t&&!isNaN(t)}function N(t){var n,o=[];if(!i(t))if(e(t))if(a(t.length))o=t;else for(n in t)o.push(t[n]);else o.push(t);return o}function h(n){return n?q(n)?n:(n=N(n),function(o){var a;if(i(o))return!1;if(e(o)){for(a=0;a<o.length;a++)if(t.inArray(o[a],n)>=0)return!0;return!1}return t.inArray(o,n)>=0}):void 0}function v(t,n,e){var a=n?t:null;return!t||o(t)?a:t.latLng?v(t.latLng):t instanceof A.LatLng?t:g(t.lat)?new A.LatLng(t.lat,t.lng):!e&&R(t)&&g(t[0])&&g(t[1])?new A.LatLng(t[0],t[1]):a}function y(t){var n,e;return!t||t instanceof A.LatLngBounds?t||null:(R(t)?2===t.length?(n=v(t[0]),e=v(t[1])):4===t.length&&(n=v([t[0],t[1]]),e=v([t[2],t[3]])):"ne"in t&&"sw"in t?(n=v(t.ne),e=v(t.sw)):"n"in t&&"e"in t&&"s"in t&&"w"in t&&(n=v([t.n,t.e]),e=v([t.s,t.w])),n&&e?new A.LatLngBounds(e,n):null)}function m(t,n,e,a,i){var r=!!e&&v(a.td,!1,!0),s=r?{NaN:r}:!!a.td.address&&(o(a.td.address)?{NaN:a.td.address}:a.td.address),u=!!s&&G.get(s),l=this;s?(i=i||0,u?(a.latLng=u.results[0].geometry.location,a.results=u.results,a.status=u.status,n.apply(t,[a])):(s.location&&(s.location=v(s.location)),s.bounds&&(s.bounds=y(s.bounds)),M().geocode(s,function(o,r){r===A.GeocoderStatus.OK?(G.store(s,{NaN:o,NaN:r}),a.latLng=o[0].geometry.location,a.results=o,a.status=r,n.apply(t,[a])):r===A.GeocoderStatus.OVER_QUERY_LIMIT&&i<U.queryLimit.attempt?setTimeout(function(){m.apply(l,[t,n,e,a,i+1])},U.queryLimit.delay+Math.floor(Math.random()*U.queryLimit.random)):(f("geocode failed",r,s),a.latLng=a.results=!1,a.status=r,n.apply(t,[a]))}))):(a.latLng=v(a.td,!1,!0),n.apply(t,[a]))}function w(n,e,o,a){function i(){do{s++}while(s<n.length&&!("address"in n[s]));return s>=n.length?void o.apply(e,[a]):void m(r,function(e){delete e.td,t.extend(n[s],e),i.apply(r,[])},!0,{NaN:n[s]})}var r=this,s=-1;i()}function L(t,n,e){var o=!1;navigator&&navigator.geolocation?navigator.geolocation.getCurrentPosition(function(a){o||(o=!0,e.latLng=new A.LatLng(a.coords.latitude,a.coords.longitude),n.apply(t,[e]))},function(){o||(o=!0,e.latLng=!1,n.apply(t,[e]))},e.opts.getCurrentPosition):(e.latLng=!1,n.apply(t,[e]))}function b(t){var n,o=!1;if(e(t)&&t.hasOwnProperty("get")){for(n in t)if("get"!==n)return!1;o=!t.get.hasOwnProperty("callback")}return o}function M(){return V.geocoder||(V.geocoder=new A.Geocoder),V.geocoder}function I(){var t=[];this.get=function(n){if(t.length){var o,a,i,r,s,u=c(n);for(o=0;o<t.length;o++){for(r=t[o],s=u.length===r.keys.length,a=0;a<u.length&&s;a++)(s=(i=u[a])in r.request)&&(s=e(n[i])&&"equals"in n[i]&&q(n[i])?n[i].equals(r.request[i]):n[i]===r.request[i]);if(s)return r.results}}},this.store=function(n,e){t.push({NaN:n,NaN:c(n),NaN:e})}}function x(){var t=[],n=this;n.empty=function(){return!t.length},n.add=function(n){t.push(n)},n.get=function(){return!!t.length&&t[0]},n.ack=function(){t.shift()}}function B(){function n(t){return{NaN:t.id,NaN:t.name,NaN:t.obj,NaN:t.tag,NaN:t.data}}function e(t){q(t.setMap)&&t.setMap(null),q(t.remove)&&t.remove(),q(t.free)&&t.free(),t=null}var o={},a={},r=this;r.add=function(t,n,e,i){var u=t.td||{},l=s(u.id);return o[n]||(o[n]=[]),l in a&&r.clearById(l),a[l]={NaN:e,NaN:i,NaN:n,NaN:l,NaN:u.tag,NaN:u.data},o[n].push(l),l},r.getById=function(t,e,o){var i=!1;return t in a&&(i=e?a[t].sub:o?n(a[t]):a[t].obj),i},r.get=function(t,e,i,r){var s,u,l=h(i);if(!o[t]||!o[t].length)return null;for(s=o[t].length;s;)if(s--,(u=o[t][e?s:o[t].length-s-1])&&a[u]){if(l&&!l(a[u].tag))continue;return r?n(a[u]):a[u].obj}return null},r.all=function(t,e,r){var s=[],u=h(e),l=function(t){var e,i;for(e=0;e<o[t].length;e++)if((i=o[t][e])&&a[i]){if(u&&!u(a[i].tag))continue;s.push(r?n(a[i]):a[i].obj)}};if(t in o)l(t);else if(i(t))for(t in o)l(t);return s},r.rm=function(t,n,e){var i,s;if(!o[t])return!1;if(n)if(e)for(i=o[t].length-1;i>=0&&(s=o[t][i],!n(a[s].tag));i--);else for(i=0;i<o[t].length&&(s=o[t][i],!n(a[s].tag));i++);else i=e?o[t].length-1:0;return i in o[t]&&r.clearById(o[t][i],i)},r.clearById=function(t,n){if(t in a){var r,s=a[t].name;for(r=0;i(n)&&r<o[s].length;r++)t===o[s][r]&&(n=r);return e(a[t].obj),a[t].sub&&e(a[t].sub),delete a[t],o[s].splice(n,1),!0}return!1},r.objGetById=function(t){var n,e;if(o.clusterer)for(e in o.clusterer)if(!1!==(n=a[o.clusterer[e]].obj.getById(t)))return n;return!1},r.objClearById=function(t){var n;if(o.clusterer)for(n in o.clusterer)if(a[o.clusterer[n]].obj.clearById(t))return!0;return null},r.clear=function(t,n,e,a){var i,s,u,l=h(a);if(t&&t.length)t=N(t);else for(i in t=[],o)t.push(i);for(s=0;s<t.length;s++)if(u=t[s],n)r.rm(u,l,!0);else if(e)r.rm(u,l,!1);else for(;r.rm(u,l,!1););},r.objClear=function(n,e,i,r){var s;if(o.clusterer&&(t.inArray("marker",n)>=0||!n.length))for(s in o.clusterer)a[o.clusterer[s]].obj.clear(e,i,r)}}function P(n,e,a){function i(t){var n={};return n[t]={},n}function r(){var t;for(t in a)if(a.hasOwnProperty(t)&&!u.hasOwnProperty(t))return t}var s,u={},l=this,c={NaN:{NaN:!1,NaN:!1,NaN:!1,NaN:!1,NaN:!1,NaN:!1,NaN:!1,NaN:!1,NaN:!1,NaN:!0},NaN:{NaN:!0}};o(a)&&(a=i(a)),l.run=function(){for(var o,i;o=r();){if(q(n[o]))return s=o,i=t.extend(!0,{},U[o]||{},a[o].options||{}),void(o in c.latLng?a[o].values?w(a[o].values,n,n[o],{NaN:a[o],NaN:i,NaN:u}):m(n,n[o],c.latLng[o],{NaN:a[o],NaN:i,NaN:u}):o in c.geoloc?L(n,n[o],{NaN:a[o],NaN:i,NaN:u}):n[o].apply(n,[{NaN:a[o],NaN:i,NaN:u}]));u[o]=null}e.apply(n,[a,u])},l.ack=function(t){u[s]=t,l.run.apply(l,[])}}function k(){return V.ds||(V.ds=new A.DirectionsService),V.ds}function O(){return V.dms||(V.dms=new A.DistanceMatrixService),V.dms}function j(){return V.mzs||(V.mzs=new A.MaxZoomService),V.mzs}function C(){return V.es||(V.es=new A.ElevationService),V.es}function E(t){function n(){var t=this;return t.onAdd=function(){},t.onRemove=function(){},t.draw=function(){},U.classes.OverlayView.apply(t,[])}n.prototype=U.classes.OverlayView.prototype;var e=new n;return e.setMap(t),e}function S(n,o,a){function i(t){C[t]||(delete S[t].options.map,C[t]=new U.classes.Marker(S[t].options),l(n,{NaN:S[t]},C[t],S[t].id))}function r(){return(y=_.getProjection())?(I=!0,P.push(A.event.addListener(o,"zoom_changed",f)),P.push(A.event.addListener(o,"bounds_changed",f)),void N()):void setTimeout(function(){r.apply(B,[])},25)}function u(t){e(k[t])?(q(k[t].obj.setMap)&&k[t].obj.setMap(null),q(k[t].obj.remove)&&k[t].obj.remove(),q(k[t].shadow.remove)&&k[t].obj.remove(),q(k[t].shadow.setMap)&&k[t].shadow.setMap(null),delete k[t].obj,delete k[t].shadow):C[t]&&C[t].setMap(null),delete k[t]}function c(){var t,n,e,o,a,i,r,s,u=Math.cos,l=Math.sin,c=arguments;return c[0]instanceof A.LatLng?(t=c[0].lat(),e=c[0].lng(),c[1]instanceof A.LatLng?(n=c[1].lat(),o=c[1].lng()):(n=c[1],o=c[2])):(t=c[0],e=c[1],c[2]instanceof A.LatLng?(n=c[2].lat(),o=c[2].lng()):(n=c[2],o=c[3])),a=Math.PI*t/180,i=Math.PI*e/180,r=Math.PI*n/180,s=Math.PI*o/180,6371e3*Math.acos(Math.min(u(a)*u(r)*u(i)*u(s)+u(a)*l(i)*u(r)*l(s)+l(a)*l(r),1))}function d(){var t=c(o.getCenter(),o.getBounds().getNorthEast());return new A.Circle({NaN:o.getCenter(),NaN:1.25*t}).getBounds()}function p(){var t,n={};for(t in k)n[t]=!0;return n}function f(){clearTimeout(v),v=setTimeout(N,25)}function g(t){var n=y.fromLatLngToDivPixel(t),e=y.fromDivPixelToLatLng(new A.Point(n.x+a.radius,n.y-a.radius)),o=y.fromDivPixelToLatLng(new A.Point(n.x-a.radius,n.y+a.radius));return new A.LatLngBounds(o,e)}function N(){if(!L&&!M&&I){var n,e,i,r,s,l,c,f,N,h,v=!1,y=[],B={},P=o.getZoom(),O="maxZoom"in a&&P>a.maxZoom,j=p();for(b=!1,P>3&&(v=(s=d()).getSouthWest().lng()<s.getNorthEast().lng()),n=0;n<S.length;n++)!S[n]||v&&!s.contains(S[n].options.position)||m&&!m(T[n])||y.push(n);for(;;){for(n=0;B[n]&&n<y.length;)n++;if(n===y.length)break;if(r=[],x&&!O){h=10;do{for(c=r,r=[],h--,s=g(c.length?s.getCenter():S[y[n]].options.position),e=n;e<y.length;e++)B[e]||s.contains(S[y[e]].options.position)&&r.push(e)}while(c.length<r.length&&r.length>1&&h)}else for(e=n;e<y.length;e++)if(!B[e]){r.push(e);break}for(l={NaN:[],NaN:[]},f=N=0,i=0;i<r.length;i++)B[r[i]]=!0,l.indexes.push(y[r[i]]),l.ref.push(y[r[i]]),f+=S[y[r[i]]].options.position.lat(),N+=S[y[r[i]]].options.position.lng();f/=r.length,N/=r.length,l.latLng=new A.LatLng(f,N),l.ref=l.ref.join("-"),l.ref in j?delete j[l.ref]:(1===r.length&&(k[l.ref]=!0),w(l))}t.each(j,function(t){u(t)}),M=!1}}var v,y,m,w,L=!1,b=!1,M=!1,I=!1,x=!0,B=this,P=[],k={},O={},j={},C=[],S=[],T=[],_=E(o,a.radius);r(),B.getById=function(t){return t in O&&(i(O[t]),C[O[t]])},B.rm=function(t){var n=O[t];C[n]&&C[n].setMap(null),delete C[n],C[n]=!1,delete S[n],S[n]=!1,delete T[n],T[n]=!1,delete O[t],delete j[n],b=!0},B.clearById=function(t){return t in O?(B.rm(t),!0):void 0},B.clear=function(t,n,e){var o,a,i,r,s,u=[],l=h(e);for(t?(o=S.length-1,a=-1,i=-1):(o=0,a=S.length,i=1),r=o;r!==a&&(!S[r]||l&&!l(S[r].tag)||(u.push(j[r]),!n&&!t));r+=i);for(s=0;s<u.length;s++)B.rm(u[s])},B.add=function(t,n){t.id=s(t.id),B.clearById(t.id),O[t.id]=C.length,j[C.length]=t.id,C.push(null),S.push(t),T.push(n),b=!0},B.addMarker=function(t,e){(e=e||{}).id=s(e.id),B.clearById(e.id),e.options||(e.options={}),e.options.position=t.getPosition(),l(n,{NaN:e},t,e.id),O[e.id]=C.length,j[C.length]=e.id,C.push(t),S.push(e),T.push(e.data||{}),b=!0},B.td=function(t){return S[t]},B.value=function(t){return T[t]},B.marker=function(t){return t in C&&(i(t),C[t])},B.markerIsSet=function(t){return Boolean(C[t])},B.setMarker=function(t,n){C[t]=n},B.store=function(t,n,e){k[t.ref]={NaN:n,NaN:e}},B.free=function(){var n;for(n=0;n<P.length;n++)A.event.removeListener(P[n]);P=[],t.each(k,function(t){u(t)}),k={},t.each(S,function(t){S[t]=null}),S=[],t.each(C,function(t){C[t]&&(C[t].setMap(null),delete C[t])}),C=[],t.each(T,function(t){delete T[t]}),T=[],O={},j={}},B.filter=function(t){m=t,N()},B.enable=function(t){x!==t&&(x=t,N())},B.display=function(t){w=t},B.error=function(t){t},B.beginUpdate=function(){L=!0},B.endUpdate=function(){L=!1,b&&N()},B.autofit=function(t){var n;for(n=0;n<S.length;n++)S[n]&&t.extend(S[n].options.position)}}function T(t,n){var e=this;e.id=function(){return t},e.filter=function(t){n.filter(t)},e.enable=function(){n.enable(!0)},e.disable=function(){n.enable(!1)},e.add=function(t,e,o){o||n.beginUpdate(),n.addMarker(t,e),o||n.endUpdate()},e.getById=function(t){return n.getById(t)},e.clearById=function(t,e){var o;return e||n.beginUpdate(),o=n.clearById(t),e||n.endUpdate(),o},e.clear=function(t,e,o,a){a||n.beginUpdate(),n.clear(t,e,o),a||n.endUpdate()}}function _(n,e,o,a){var i=this,r=[];U.classes.OverlayView.call(i),i.setMap(n),i.onAdd=function(){var n=i.getPanes();e.pane in n&&t(n[e.pane]).append(a),t.each("dblclick click mouseover mousemove mouseout mouseup mousedown".split(" "),function(n,e){r.push(A.event.addDomListener(a[0],e,function(n){t.Event(n).stopPropagation(),A.event.trigger(i,e,[n]),i.draw()}))}),r.push(A.event.addDomListener(a[0],"contextmenu",function(n){t.Event(n).stopPropagation(),A.event.trigger(i,"rightclick",[n]),i.draw()}))},i.getPosition=function(){return o},i.setPosition=function(t){o=t,i.draw()},i.draw=function(){var t=i.getProjection().fromLatLngToDivPixel(o);a.css("left",t.x+e.offset.x+"px").css("top",t.y+e.offset.y+"px")},i.onRemove=function(){var t;for(t=0;t<r.length;t++)A.event.removeListener(r[t]);a.remove()},i.hide=function(){a.hide()},i.show=function(){a.show()},i.toggle=function(){a&&(a.is(":visible")?i.show():i.hide())},i.toggleDOM=function(){i.setMap(i.getMap()?null:n)},i.getDOMElement=function(){return a[0]}}function D(a){function r(){!L&&(L=M.get())&&L.run()}function c(){L=null,M.ack(),r.call(b)}function d(t){var n,e=t.td.callback;e&&(n=Array.prototype.slice.call(arguments,1),q(e)?e.apply(a,n):R(e)&&q(e[1])&&e[1].apply(e[0],n))}function g(t,n,e){e&&l(a,t,n,e),d(t,n),L.ack(n)}function h(n,e){var o=(e=e||{}).td&&e.td.options?e.td.options:0;E?o&&(o.center&&(o.center=v(o.center)),E.setOptions(o)):((o=e.opts||t.extend(!0,{},U.map,o||{})).center=n||v(o.center),E=new U.classes.Map(a.get(0),o))}function m(e){var o,i,r=new S(a,E,e),s={},u={},c=[],d=/^[0-9]+$/;for(i in e)d.test(i)?(c.push(1*i),u[i]=e[i],u[i].width=u[i].width||0,u[i].height=u[i].height||0):s[i]=e[i];return c.sort(function(t,n){return t>n}),o=s.calculator?function(n){var e=[];return t.each(n,function(t,n){e.push(r.value(n))}),s.calculator.apply(a,[e])}:function(t){return t.length},r.error(function(){f.apply(b,arguments)}),r.display(function(i){var d,p,f,g,N,h,y=o(i.indexes);if(e.force||y>1)for(d=0;d<c.length;d++)c[d]<=y&&(p=u[c[d]]);p?(N=p.offset||[-p.width/2,-p.height/2],(f=t.extend({},s)).options=t.extend({NaN:"overlayLayer",NaN:p.content?p.content.replace("CLUSTER_COUNT",y):"",NaN:{NaN:("x"in N?N.x:N[0])||0,NaN:("y"in N?N.y:N[1])||0}},s.options||{}),g=b.overlay({NaN:f,NaN:f.options,NaN:v(i)},!0),f.options.pane="floatShadow",f.options.content=t(document.createElement("div")).width(p.width+"px").height(p.height+"px").css({NaN:"pointer"}),h=b.overlay({NaN:f,NaN:f.options,NaN:v(i)},!0),s.data={NaN:v(i),NaN:[]},t.each(i.indexes,function(t,n){s.data.markers.push(r.value(n)),r.markerIsSet(n)&&r.marker(n).setMap(null)}),l(a,{NaN:s},h,n,{NaN:g,NaN:h}),r.store(i,g,h)):t.each(i.indexes,function(t,n){r.marker(n).setMap(E)})}),r}function w(n,e,o){var i=[],r="values"in n.td;return r||(n.td.values=[{NaN:n.opts}]),n.td.values.length?(h(),t.each(n.td.values,function(t,r){var s,u,c,d,f=p(n,r);if(f.options[o])if(f.options[o][0][0]&&R(f.options[o][0][0]))for(u=0;u<f.options[o].length;u++)for(c=0;c<f.options[o][u].length;c++)f.options[o][u][c]=v(f.options[o][u][c]);else for(u=0;u<f.options[o].length;u++)f.options[o][u]=v(f.options[o][u]);f.options.map=E,d=new A[e](f.options),i.push(d),s=I.add({NaN:f},e.toLowerCase(),d),l(a,{NaN:f},d,s)}),void g(n,r?i:i[0])):void g(n,!1)}var L,b=this,M=new x,I=new B,E=null;b._plan=function(t){var n;for(n=0;n<t.length;n++)M.add(new P(b,c,t[n]));r()},b.map=function(t){h(t.latLng,t),l(a,t,E),g(t,E)},b.destroy=function(t){I.clear(),a.empty(),E&&(E=null),g(t,!0)},b.overlay=function(n,e){var o=[],i="values"in n.td;return i||(n.td.values=[{NaN:n.latLng,NaN:n.opts}]),n.td.values.length?(_.__initialised||(_.prototype=new U.classes.OverlayView,_.__initialised=!0),t.each(n.td.values,function(i,r){var s,u,c=p(n,r),d=t(document.createElement("div")).css({NaN:"none",NaN:0,NaN:"absolute"});d.append(c.options.content),u=new _(E,c.options,v(c)||v(r),d),o.push(u),d=null,e||(s=I.add(n,"overlay",u),l(a,{NaN:c},u,s))}),e?o[0]:void g(n,i?o:o[0])):void g(n,!1)},b.marker=function(n){var e,o,i,r="values"in n.td,u=!E;return r||(n.opts.position=n.latLng||v(n.opts.position),n.td.values=[{NaN:n.opts}]),n.td.values.length?(u&&h(),n.td.cluster&&!E.getBounds()?void A.event.addListenerOnce(E,"bounds_changed",function(){b.marker.apply(b,[n])}):void(n.td.cluster?(n.td.cluster instanceof T?(o=n.td.cluster,i=I.getById(o.id(),!0)):(i=m(n.td.cluster),o=new T(s(n.td.id,!0),i),I.add(n,"clusterer",o,i)),i.beginUpdate(),t.each(n.td.values,function(t,e){var o=p(n,e);o.options.position=v(o.options.position?o.options.position:e),o.options.position&&(o.options.map=E,u&&(E.setCenter(o.options.position),u=!1),i.add(o,e))}),i.endUpdate(),g(n,o)):(e=[],t.each(n.td.values,function(t,o){var i,r,s=p(n,o);s.options.position=v(s.options.position?s.options.position:o),s.options.position&&(s.options.map=E,u&&(E.setCenter(s.options.position),u=!1),r=new U.classes.Marker(s.options),e.push(r),i=I.add({NaN:s},"marker",r),l(a,{NaN:s},r,i))}),g(n,r?e:e[0])))):void g(n,!1)},b.getroute=function(t){t.opts.origin=v(t.opts.origin,!0),t.opts.destination=v(t.opts.destination,!0),k().route(t.opts,function(n,e){d(t,e===A.DirectionsStatus.OK&&n,e),L.ack()})},b.getdistance=function(t){var n;for(t.opts.origins=N(t.opts.origins),n=0;n<t.opts.origins.length;n++)t.opts.origins[n]=v(t.opts.origins[n],!0);for(t.opts.destinations=N(t.opts.destinations),n=0;n<t.opts.destinations.length;n++)t.opts.destinations[n]=v(t.opts.destinations[n],!0);O().getDistanceMatrix(t.opts,function(n,e){d(t,e===A.DistanceMatrixStatus.OK&&n,e),L.ack()})},b.infowindow=function(e){var o=[],r="values"in e.td;r||(e.latLng&&(e.opts.position=e.latLng),e.td.values=[{NaN:e.opts}]),t.each(e.td.values,function(t,s){var u,c,d=p(e,s);d.options.position=v(d.options.position?d.options.position:s.latLng),E||h(d.options.position),(c=new U.classes.InfoWindow(d.options))&&(i(d.open)||d.open)&&(r?c.open(E,d.anchor||n):c.open(E,d.anchor||(e.latLng?n:e.session.marker?e.session.marker:n))),o.push(c),u=I.add({NaN:d},"infowindow",c),l(a,{NaN:d},c,u)}),g(e,r?o:o[0])},b.circle=function(n){var e=[],o="values"in n.td;return o||(n.opts.center=n.latLng||v(n.opts.center),n.td.values=[{NaN:n.opts}]),n.td.values.length?(t.each(n.td.values,function(t,o){var i,r,s=p(n,o);s.options.center=v(s.options.center?s.options.center:o),E||h(s.options.center),s.options.map=E,r=new U.classes.Circle(s.options),e.push(r),i=I.add({NaN:s},"circle",r),l(a,{NaN:s},r,i)}),void g(n,o?e:e[0])):void g(n,!1)},b.getaddress=function(t){d(t,t.results,t.status),L.ack()},b.getlatlng=function(t){d(t,t.results,t.status),L.ack()},b.getmaxzoom=function(t){j().getMaxZoomAtLatLng(t.latLng,function(n){d(t,n.status===A.MaxZoomStatus.OK&&n.zoom,status),L.ack()})},b.getelevation=function(t){var n,e=[],o=function(n,e){d(t,e===A.ElevationStatus.OK&&n,e),L.ack()};if(t.latLng)e.push(t.latLng);else for(e=N(t.td.locations||[]),n=0;n<e.length;n++)e[n]=v(e[n]);if(e.length)C().getElevationForLocations({NaN:e},o);else{if(t.td.path&&t.td.path.length)for(n=0;n<t.td.path.length;n++)e.push(v(t.td.path[n]));e.length?C().getElevationAlongPath({NaN:e,NaN:t.td.samples},o):L.ack()}},b.defaults=function(n){t.each(n.td,function(n,o){U[n]=e(U[n])?t.extend({},U[n],o):o}),L.ack(!0)},b.rectangle=function(n){var e=[],o="values"in n.td;return o||(n.td.values=[{NaN:n.opts}]),n.td.values.length?(t.each(n.td.values,function(t,o){var i,r,s=p(n,o);s.options.bounds=y(s.options.bounds?s.options.bounds:o),E||h(s.options.bounds.getCenter()),s.options.map=E,r=new U.classes.Rectangle(s.options),e.push(r),i=I.add({NaN:s},"rectangle",r),l(a,{NaN:s},r,i)}),void g(n,o?e:e[0])):void g(n,!1)},b.polyline=function(t){w(t,"Polyline","path")},b.polygon=function(t){w(t,"Polygon","paths")},b.trafficlayer=function(t){h();var n=I.get("trafficlayer");n||((n=new U.classes.TrafficLayer).setMap(E),I.add(t,"trafficlayer",n)),g(t,n)},b.bicyclinglayer=function(t){h();var n=I.get("bicyclinglayer");n||((n=new U.classes.BicyclingLayer).setMap(E),I.add(t,"bicyclinglayer",n)),g(t,n)},b.groundoverlay=function(t){t.opts.bounds=y(t.opts.bounds),t.opts.bounds&&h(t.opts.bounds.getCenter());var n=new U.classes.GroundOverlay(t.opts.url,t.opts.bounds,t.opts.opts);n.setMap(E),g(t,n,I.add(t,"groundoverlay",n))},b.streetviewpanorama=function(n){n.opts.opts||(n.opts.opts={}),n.latLng?n.opts.opts.position=n.latLng:n.opts.opts.position&&(n.opts.opts.position=v(n.opts.opts.position)),n.td.divId?n.opts.container=document.getElementById(n.td.divId):n.opts.container&&(n.opts.container=t(n.opts.container).get(0));var e=new U.classes.StreetViewPanorama(n.opts.container,n.opts.opts);e&&E.setStreetView(e),g(n,e,I.add(n,"streetviewpanorama",e))},b.kmllayer=function(n){var e=[],o="values"in n.td;return o||(n.td.values=[{NaN:n.opts}]),n.td.values.length?(t.each(n.td.values,function(t,o){var i,r,s,c=p(n,o);E||h(),s=c.options,c.options.opts&&(s=c.options.opts,c.options.url&&(s.url=c.options.url)),s.map=E,r=u("3.10")?new U.classes.KmlLayer(s):new U.classes.KmlLayer(s.url,s),e.push(r),i=I.add({NaN:c},"kmllayer",r),l(a,{NaN:c},r,i)}),void g(n,o?e:e[0])):void g(n,!1)},b.panel=function(n){h();var e,o=0,r=0,s=t(document.createElement("div"));s.css({NaN:"absolute",NaN:1e3,NaN:"hidden"}),n.opts.content&&(e=t(n.opts.content),s.append(e),a.first().prepend(s),i(n.opts.left)?i(n.opts.right)?n.opts.center&&(o=(a.width()-e.width())/2):o=a.width()-e.width()-n.opts.right:o=n.opts.left,i(n.opts.top)?i(n.opts.bottom)?n.opts.middle&&(r=(a.height()-e.height())/2):r=a.height()-e.height()-n.opts.bottom:r=n.opts.top,s.css({NaN:r,NaN:o,NaN:"visible"})),g(n,s,I.add(n,"panel",s)),s=null},b.directionsrenderer=function(n){n.opts.map=E;var e=new A.DirectionsRenderer(n.opts);n.td.divId?e.setPanel(document.getElementById(n.td.divId)):n.td.container&&e.setPanel(t(n.td.container).get(0)),g(n,e,I.add(n,"directionsrenderer",e))},b.getgeoloc=function(t){g(t,t.latLng)},b.styledmaptype=function(t){h();var n=new U.classes.StyledMapType(t.td.styles,t.opts);E.mapTypes.set(t.td.id,n),g(t,n)},b.imagemaptype=function(t){h();var n=new U.classes.ImageMapType(t.opts);E.mapTypes.set(t.td.id,n),g(t,n)},b.autofit=function(n){var e=new A.LatLngBounds;t.each(I.all(),function(t,n){n.getPosition?e.extend(n.getPosition()):n.getBounds?(e.extend(n.getBounds().getNorthEast()),e.extend(n.getBounds().getSouthWest())):n.getPaths?n.getPaths().forEach(function(t){t.forEach(function(t){e.extend(t)})}):n.getPath?n.getPath().forEach(function(t){e.extend(t)}):n.getCenter?e.extend(n.getCenter()):"function"==typeof T&&n instanceof T&&((n=I.getById(n.id(),!0))&&n.autofit(e))}),e.isEmpty()||E.getBounds()&&E.getBounds().equals(e)||("maxZoom"in n.td&&A.event.addListenerOnce(E,"bounds_changed",function(){this.getZoom()>n.td.maxZoom&&this.setZoom(n.td.maxZoom)}),E.fitBounds(e)),g(n,!0)},b.clear=function(n){if(o(n.td)){if(I.clearById(n.td)||I.objClearById(n.td))return void g(n,!0);n.td={NaN:n.td}}n.td.id?t.each(N(n.td.id),function(t,n){I.clearById(n)||I.objClearById(n)}):(I.clear(N(n.td.name),n.td.last,n.td.first,n.td.tag),I.objClear(N(n.td.name),n.td.last,n.td.first,n.td.tag)),g(n,!0)},b.get=function(e,a,i){var r,s,u=a?e:e.td;return a||(i=u.full),o(u)?!1===(s=I.getById(u,!1,i)||I.objGetById(u))&&(r=u,u={}):r=u.name,"map"===r&&(s=E),s||(s=[],u.id?(t.each(N(u.id),function(t,n){s.push(I.getById(n,!1,i)||I.objGetById(n))}),R(u.id)||(s=s[0])):(t.each(r?N(r):[n],function(n,e){var o;u.first?(o=I.get(e,!1,u.tag,i))&&s.push(o):u.all?t.each(I.all(e,u.tag,i),function(t,n){s.push(n)}):(o=I.get(e,!0,u.tag,i))&&s.push(o)}),u.all||R(r)||(s=s[0]))),s=R(s)||!u.all?s:[s],a?s:void g(e,s)},b.exec=function(n){t.each(N(n.td.func),function(e,o){t.each(b.get(n.td,!0,!n.td.hasOwnProperty("full")||n.td.full),function(t,n){o.call(a,n)})}),g(n,!0)},b.trigger=function(n){if(o(n.td))A.event.trigger(E,n.td);else{var e=[E,n.td.eventName];n.td.var_args&&t.each(n.td.var_args,function(t,n){e.push(n)}),A.event.trigger.apply(A.event,e)}d(n),L.ack()}}var U,A,Z=0,q=t.isFunction,R=t.isArray,V={},G=new I;t.fn.gmap3=function(){var n,e=[],o=[];for(r(),n=0;n<arguments.length;n++)arguments[n]&&e.push(arguments[n]);return e.length||e.push("map"),t.each(this,function(){var n=t(this),a=n.data("gmap3");!1,a||(a=new D(n),n.data("gmap3",a)),1!==e.length||"get"!==e[0]&&!b(e[0])?a._plan(e):o.push("get"===e[0]?a.get("map",!0):a.get(e[0].get,!0,e[0].get.full))}),o.length?1===o.length?o[0]:o:this}}(jQuery);