/*___________________________________________________________________________________________________________________________________________________
 _ jquery.mb.components                                                                                                                             _
 _                                                                                                                                                  _
 _ file: jquery.mb.YTPlayer.js                                                                                                                      _
 _ last modified: 19/08/14 20.13                                                                                                                    _
 _                                                                                                                                                  _
 _ Open Lab s.r.l., Florence - Italy                                                                                                                _
 _                                                                                                                                                  _
 _ email: matteo@open-lab.com                                                                                                                       _
 _ site: http://pupunzi.com                                                                                                                         _
 _       http://open-lab.com                                                                                                                        _
 _ blog: http://pupunzi.open-lab.com                                                                                                                _
 _ Q&A:  http://jquery.pupunzi.com                                                                                                                  _
 _                                                                                                                                                  _
 _ Licences: MIT, GPL                                                                                                                               _
 _    http://www.opensource.org/licenses/mit-license.php                                                                                            _
 _    http://www.gnu.org/licenses/gpl.html                                                                                                          _
 _                                                                                                                                                  _
 _ Copyright (c) 2001-2014. Matteo Bicocchi (Pupunzi);                                                                                              _
 ___________________________________________________________________________________________________________________________________________________*/
function onYouTubePlayerAPIReady(){ytp.YTAPIReady||(ytp.YTAPIReady=!0,jQuery(document).trigger("YTAPIReady"))}var ytp=ytp||{};!function(jQuery,ytp){var nAgt=navigator.userAgent;if(!jQuery.browser){var nameOffset,verOffset,ix;if(jQuery.browser={},jQuery.browser.mozilla=!1,jQuery.browser.webkit=!1,jQuery.browser.opera=!1,jQuery.browser.safari=!1,jQuery.browser.chrome=!1,jQuery.browser.msie=!1,jQuery.browser.ua=nAgt,jQuery.browser.name=navigator.appName,jQuery.browser.fullVersion=""+parseFloat(navigator.appVersion),jQuery.browser.majorVersion=parseInt(navigator.appVersion,10),-1!=(verOffset=nAgt.indexOf("Opera")))jQuery.browser.opera=!0,jQuery.browser.name="Opera",jQuery.browser.fullVersion=nAgt.substring(verOffset+6),-1!=(verOffset=nAgt.indexOf("Version"))&&(jQuery.browser.fullVersion=nAgt.substring(verOffset+8));else if(-1!=(verOffset=nAgt.indexOf("MSIE")))jQuery.browser.msie=!0,jQuery.browser.name="Microsoft Internet Explorer",jQuery.browser.fullVersion=nAgt.substring(verOffset+5);else if(-1!=nAgt.indexOf("Trident")){jQuery.browser.msie=!0,jQuery.browser.name="Microsoft Internet Explorer";var start=nAgt.indexOf("rv:")+3,end=start+4;jQuery.browser.fullVersion=nAgt.substring(start,end)}else-1!=(verOffset=nAgt.indexOf("Chrome"))?(jQuery.browser.webkit=!0,jQuery.browser.chrome=!0,jQuery.browser.name="Chrome",jQuery.browser.fullVersion=nAgt.substring(verOffset+7)):-1!=(verOffset=nAgt.indexOf("Safari"))?(jQuery.browser.webkit=!0,jQuery.browser.safari=!0,jQuery.browser.name="Safari",jQuery.browser.fullVersion=nAgt.substring(verOffset+7),-1!=(verOffset=nAgt.indexOf("Version"))&&(jQuery.browser.fullVersion=nAgt.substring(verOffset+8))):-1!=(verOffset=nAgt.indexOf("AppleWebkit"))?(jQuery.browser.webkit=!0,jQuery.browser.name="Safari",jQuery.browser.fullVersion=nAgt.substring(verOffset+7),-1!=(verOffset=nAgt.indexOf("Version"))&&(jQuery.browser.fullVersion=nAgt.substring(verOffset+8))):-1!=(verOffset=nAgt.indexOf("Firefox"))?(jQuery.browser.mozilla=!0,jQuery.browser.name="Firefox",jQuery.browser.fullVersion=nAgt.substring(verOffset+8)):(nameOffset=nAgt.lastIndexOf(" ")+1)<(verOffset=nAgt.lastIndexOf("/"))&&(jQuery.browser.name=nAgt.substring(nameOffset,verOffset),jQuery.browser.fullVersion=nAgt.substring(verOffset+1),jQuery.browser.name.toLowerCase()==jQuery.browser.name.toUpperCase()&&(jQuery.browser.name=navigator.appName));-1!=(ix=jQuery.browser.fullVersion.indexOf(";"))&&(jQuery.browser.fullVersion=jQuery.browser.fullVersion.substring(0,ix)),-1!=(ix=jQuery.browser.fullVersion.indexOf(" "))&&(jQuery.browser.fullVersion=jQuery.browser.fullVersion.substring(0,ix)),jQuery.browser.majorVersion=parseInt(""+jQuery.browser.fullVersion,10),isNaN(jQuery.browser.majorVersion)&&(jQuery.browser.fullVersion=""+parseFloat(navigator.appVersion),jQuery.browser.majorVersion=parseInt(navigator.appVersion,10)),jQuery.browser.version=jQuery.browser.majorVersion}jQuery.browser.android=/Android/i.test(nAgt),jQuery.browser.blackberry=/BlackBerry|BB|PlayBook/i.test(nAgt),jQuery.browser.ios=/iPhone|iPad|iPod|webOS/i.test(nAgt),jQuery.browser.operaMobile=/Opera Mini/i.test(nAgt),jQuery.browser.kindle=/Kindle|Silk/i.test(nAgt),jQuery.browser.windowsMobile=/IEMobile|Windows Phone/i.test(nAgt),jQuery.browser.mobile=jQuery.browser.android||jQuery.browser.blackberry||jQuery.browser.ios||jQuery.browser.windowsMobile||jQuery.browser.operaMobile||jQuery.browser.kindle,jQuery.fn.CSSAnimate=function(e,r,a,t,o){function n(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function l(e,r){return"string"!=typeof e||e.match(/^[\-0-9\.]+$/)?""+e+r:e}return jQuery.support.CSStransition=function(){var e=(document.body||document.documentElement).style;return void 0!==e.transition||void 0!==e.WebkitTransition||void 0!==e.MozTransition||void 0!==e.MsTransition||void 0!==e.OTransition}(),this.each(function(){var i=this,y=jQuery(this);i.id=i.id||"CSSA_"+(new Date).getTime();var s=s||{NaN:"noEvent"};if(i.CSSAIsRunning&&i.eventType==s.type)i.CSSqueue=function(){y.CSSAnimate(e,r,a,t,o)};else if(i.CSSqueue=null,i.eventType=s.type,0!==y.length&&e){if(i.CSSAIsRunning=!0,"function"==typeof r&&(o=r,r=jQuery.fx.speeds._default),"function"==typeof a&&(o=a,a=0),"function"==typeof t&&(o=t,t="cubic-bezier(0.65,0.03,0.36,0.72)"),"string"==typeof r)for(var u in jQuery.fx.speeds){if(r==u){r=jQuery.fx.speeds[u];break}r=jQuery.fx.speeds._default}if(r||(r=jQuery.fx.speeds._default),jQuery.support.CSStransition){(s={NaN:"ease",NaN:"ease-in",NaN:"ease-out",NaN:"ease-in-out",NaN:"cubic-bezier(0,1,.5,1)",NaN:"cubic-bezier(.215,.61,.355,1)",NaN:"cubic-bezier(.645,.045,.355,1)",NaN:"cubic-bezier(.6,.04,.98,.335)",NaN:"cubic-bezier(.075,.82,.165,1)",NaN:"cubic-bezier(.785,.135,.15,.86)",NaN:"cubic-bezier(.95,.05,.795,.035)",NaN:"cubic-bezier(.19,1,.22,1)",NaN:"cubic-bezier(1,0,0,1)",NaN:"cubic-bezier(.55,.085,.68,.53)",NaN:"cubic-bezier(.25,.46,.45,.94)",NaN:"cubic-bezier(.455,.03,.515,.955)",NaN:"cubic-bezier(.895,.03,.685,.22)",NaN:"cubic-bezier(.165,.84,.44,1)",NaN:"cubic-bezier(.77,0,.175,1)",NaN:"cubic-bezier(.755,.05,.855,.06)",NaN:"cubic-bezier(.23,1,.32,1)",NaN:"cubic-bezier(.86,0,.07,1)",NaN:"cubic-bezier(.47,0,.745,.715)",NaN:"cubic-bezier(.39,.575,.565,1)",NaN:"cubic-bezier(.445,.05,.55,.95)",NaN:"cubic-bezier(.6,-.28,.735,.045)",NaN:"cubic-bezier(.175, .885,.32,1.275)",NaN:"cubic-bezier(.68,-.55,.265,1.55)"})[t]&&(t=s[t]);var p="",d="transitionEnd";for(T in jQuery.browser.webkit?(p="-webkit-",d="webkitTransitionEnd"):jQuery.browser.mozilla?(p="-moz-",d="transitionend"):jQuery.browser.opera?(p="-o-",d="otransitionend"):jQuery.browser.msie&&(p="-ms-",d="msTransitionEnd"),s=[],e)"transform"===(u=T)&&(e[u=p+"transform"]=e[T],delete e[T]),"filter"===u&&(e[u=p+"filter"]=e[T],delete e[T]),"transform-origin"!==u&&"origin"!==u||(e[u=p+"transform-origin"]=e[T],delete e[T]),"x"===u&&(e[u=p+"transform"]=e[u]||"",e[u]+=" translateX("+l(e[T],"px")+")",delete e[T]),"y"===u&&(e[u=p+"transform"]=e[u]||"",e[u]+=" translateY("+l(e[T],"px")+")",delete e[T]),"z"===u&&(e[u=p+"transform"]=e[u]||"",e[u]+=" translateZ("+l(e[T],"px")+")",delete e[T]),"rotate"===u&&(e[u=p+"transform"]=e[u]||"",e[u]+=" rotate("+l(e[T],"deg")+")",delete e[T]),"rotateX"===u&&(e[u=p+"transform"]=e[u]||"",e[u]+=" rotateX("+l(e[T],"deg")+")",delete e[T]),"rotateY"===u&&(e[u=p+"transform"]=e[u]||"",e[u]+=" rotateY("+l(e[T],"deg")+")",delete e[T]),"rotateZ"===u&&(e[u=p+"transform"]=e[u]||"",e[u]+=" rotateZ("+l(e[T],"deg")+")",delete e[T]),"scale"===u&&(e[u=p+"transform"]=e[u]||"",e[u]+=" scale("+l(e[T],"")+")",delete e[T]),"scaleX"===u&&(e[u=p+"transform"]=e[u]||"",e[u]+=" scaleX("+l(e[T],"")+")",delete e[T]),"scaleY"===u&&(e[u=p+"transform"]=e[u]||"",e[u]+=" scaleY("+l(e[T],"")+")",delete e[T]),"scaleZ"===u&&(e[u=p+"transform"]=e[u]||"",e[u]+=" scaleZ("+l(e[T],"")+")",delete e[T]),"skew"===u&&(e[u=p+"transform"]=e[u]||"",e[u]+=" skew("+l(e[T],"deg")+")",delete e[T]),"skewX"===u&&(e[u=p+"transform"]=e[u]||"",e[u]+=" skewX("+l(e[T],"deg")+")",delete e[T]),"skewY"===u&&(e[u=p+"transform"]=e[u]||"",e[u]+=" skewY("+l(e[T],"deg")+")",delete e[T]),"perspective"===u&&(e[u=p+"transform"]=e[u]||"",e[u]+=" perspective("+l(e[T],"px")+")",delete e[T]),0>s.indexOf(u)&&s.push(n(u));var T=s.join(","),P=function(){y.off(d+"."+i.id),clearTimeout(i.timeout),y.css(p+"transition",""),"function"==typeof o&&o(y),i.called=!0,i.CSSAIsRunning=!1,"function"==typeof i.CSSqueue&&(i.CSSqueue(),i.CSSqueue=null)},c={};jQuery.extend(c,e),c[p+"transition-property"]=T,c[p+"transition-duration"]=r+"ms",c[p+"transition-delay"]=a+"ms",c[p+"transition-style"]="preserve-3d",c[p+"transition-timing-function"]=t,setTimeout(function(){y.one(d+"."+i.id,P),y.css(c)},1),i.timeout=setTimeout(function(){y.called||!o?(y.called=!1,i.CSSAIsRunning=!1):(y.css(p+"transition",""),o(y),i.CSSAIsRunning=!1,"function"==typeof i.CSSqueue&&(i.CSSqueue(),i.CSSqueue=null))},r+a+100)}else{for(var T in e)"transform"===T&&delete e[T],"filter"===T&&delete e[T],"transform-origin"===T&&delete e[T],"auto"===e[T]&&delete e[T];o&&"string"!=typeof o||(o="linear"),y.animate(e,r,o)}}})};var getYTPVideoID=function(e){var r,a;return e.indexOf("youtu.be")>0?r=(a=(r=e.substr(e.lastIndexOf("/")+1,e.length)).indexOf("?list=")>0?r.substr(r.lastIndexOf("="),r.length):null)?r.substr(0,r.lastIndexOf("?")):r:e.indexOf("http")>-1?(r=e.match(/[\\?&]v=([^&#]*)/)[1],a=e.indexOf("list=")>0?e.match(/[\\?&]list=([^&#]*)/)[1]:null):a=(r=e.length>15?null:e)?null:e,{NaN:r,NaN:a}};jQuery.mbYTPlayer={NaN:"jquery.mb.YTPlayer",NaN:"2.8.0",NaN:"Matteo Bicocchi",NaN:{NaN:"body",NaN:"auto",NaN:null,NaN:null,NaN:0,NaN:0,NaN:!0,NaN:100,NaN:!1,NaN:1,NaN:"default",NaN:!1,NaN:!0,NaN:!0,NaN:!1,NaN:!0,NaN:!1,NaN:!0,NaN:!0,NaN:!0,NaN:!0,NaN:function(){}},NaN:{NaN:"P",NaN:"p",NaN:"M",NaN:"A",NaN:"O",NaN:"R",NaN:"Y"},NaN:"https:",NaN:function(options){return this.each(function(){var YTPlayer=this,$YTPlayer=jQuery(YTPlayer);YTPlayer.loop=0,YTPlayer.opt={},$YTPlayer.addClass("mb_YTPlayer");var property=$YTPlayer.data("property")&&"string"==typeof $YTPlayer.data("property")?eval("("+$YTPlayer.data("property")+")"):$YTPlayer.data("property");void 0!==property&&"undefined"!=typeof property.vol&&(property.vol=0==property.vol?property.vol=1:property.vol),jQuery.extend(YTPlayer.opt,jQuery.mbYTPlayer.defaults,options,property);var isIframe=function(){var e=!1;try{self.location.href!=top.location.href&&(e=!0)}catch(r){e=!0}return e},canGoFullScreen=!(jQuery.browser.msie||jQuery.browser.opera||isIframe());canGoFullScreen||(YTPlayer.opt.realfullscreen=!1),$YTPlayer.attr("id")||$YTPlayer.attr("id","video_"+(new Date).getTime());var playerID="mbYTP_"+YTPlayer.id;YTPlayer.isAlone=!1,YTPlayer.hasFocus=!0;var videoID=this.opt.videoURL?getYTPVideoID(this.opt.videoURL).videoID:!!$YTPlayer.attr("href")&&getYTPVideoID($YTPlayer.attr("href")).videoID,playlistID=this.opt.videoURL?getYTPVideoID(this.opt.videoURL).playlistID:!!$YTPlayer.attr("href")&&getYTPVideoID($YTPlayer.attr("href")).playlistID;YTPlayer.videoID=videoID,YTPlayer.playlistID=playlistID,YTPlayer.opt.showAnnotations=YTPlayer.opt.showAnnotations?"0":"3";var playerVars={NaN:0,NaN:1,NaN:0,NaN:0,NaN:0,NaN:1,NaN:3,NaN:playerID,NaN:"*",NaN:!0,NaN:"transparent",NaN:YTPlayer.opt.showAnnotations},v=document.createElement("video");v.canPlayType&&jQuery.extend(playerVars,{NaN:1}),jQuery.browser.msie&&jQuery.browser.version<9&&(this.opt.opacity=1);var playerBox=jQuery("<div/>").attr("id",playerID).addClass("playerBox"),overlay=jQuery("<div/>").css({NaN:"absolute",NaN:0,NaN:0,NaN:"100%",NaN:"100%"}).addClass("YTPOverlay");if(YTPlayer.isSelf="self"==YTPlayer.opt.containment,YTPlayer.opt.containment="self"==YTPlayer.opt.containment?jQuery(this):jQuery(YTPlayer.opt.containment),YTPlayer.isBackground="body"==YTPlayer.opt.containment.get(0).tagName.toLowerCase(),!YTPlayer.isBackground||!ytp.backgroundIsInited){var isPlayer=YTPlayer.opt.containment.is(jQuery(this));if(YTPlayer.canPlayOnMobile=isPlayer&&0==jQuery(this).children().length,isPlayer?YTPlayer.isPlayer=!0:$YTPlayer.hide(),!jQuery.browser.mobile||YTPlayer.canPlayOnMobile){if(YTPlayer.opt.addRaster){var classN="dot"==YTPlayer.opt.addRaster?"raster-dot":"raster",retina=window.retina||window.devicePixelRatio>1;overlay.addClass(retina?classN+" retina":classN)}else overlay.removeClass(function(e,r){var a=r.split(" "),t=[];return jQuery.each(a,function(e,r){/raster-.*/.test(r)&&t.push(r)}),t.push("retina"),t.join(" ")});var wrapper=jQuery("<div/>").addClass("mbYTP_wrapper").attr("id","wrapper_"+playerID);if(wrapper.css({NaN:"absolute",NaN:0,NaN:"100%",NaN:"100%",NaN:0,NaN:0,NaN:"hidden",NaN:0}),playerBox.css({NaN:"absolute",NaN:0,NaN:"100%",NaN:"100%",NaN:0,NaN:0,NaN:"hidden"}),wrapper.append(playerBox),YTPlayer.opt.containment.children().not("script, style").each(function(){"static"==jQuery(this).css("position")&&jQuery(this).css("position","relative")}),YTPlayer.isBackground?(jQuery("body").css({NaN:"border-box"}),wrapper.css({NaN:"fixed",NaN:0,NaN:0,NaN:0,NaN:"translateZ(0)"}),$YTPlayer.hide()):"static"==YTPlayer.opt.containment.css("position")&&YTPlayer.opt.containment.css({NaN:"relative"}),YTPlayer.opt.containment.prepend(wrapper),YTPlayer.wrapper=wrapper,playerBox.css({NaN:1}),jQuery.browser.mobile||(playerBox.after(overlay),YTPlayer.overlay=overlay),YTPlayer.isBackground||overlay.on("mouseenter",function(){$YTPlayer.find(".mb_YTPBar").addClass("visible")}).on("mouseleave",function(){$YTPlayer.find(".mb_YTPBar").removeClass("visible")}),ytp.YTAPIReady)setTimeout(function(){jQuery(document).trigger("YTAPIReady")},100);else{jQuery("#YTAPI").remove();var tag=jQuery("<script></script>").attr({NaN:jQuery.mbYTPlayer.locationProtocol+"//www.youtube.com/player_api?v="+jQuery.mbYTPlayer.version,NaN:"YTAPI"});jQuery("head title").after(tag)}jQuery(document).on("YTAPIReady",function(){YTPlayer.isBackground&&ytp.backgroundIsInited||YTPlayer.isInit||(YTPlayer.isBackground&&YTPlayer.opt.stopMovieOnClick&&jQuery(document).off("mousedown.ytplayer").on("mousedown.ytplayer",function(e){var r=jQuery(e.target);(r.is("a")||r.parents().is("a"))&&$YTPlayer.pauseYTP()}),YTPlayer.isBackground&&(ytp.backgroundIsInited=!0),YTPlayer.opt.autoPlay="undefined"==typeof YTPlayer.opt.autoPlay?!!YTPlayer.isBackground:YTPlayer.opt.autoPlay,YTPlayer.opt.vol=YTPlayer.opt.vol?YTPlayer.opt.vol:100,jQuery.mbYTPlayer.getDataFromFeed(YTPlayer),jQuery(YTPlayer).on("YTPChanged",function(){YTPlayer.isInit||(YTPlayer.isInit=!0,jQuery.browser.mobile&&YTPlayer.canPlayOnMobile?new YT.Player(playerID,{NaN:YTPlayer.videoID.toString(),NaN:"100%",NaN:"100%",NaN:YTPlayer.videoID,NaN:{NaN:function(e){YTPlayer.player=e.target,playerBox.css({NaN:1}),YTPlayer.wrapper.css({NaN:YTPlayer.opt.opacity}),$YTPlayer.optimizeDisplay()},NaN:function(){}}}):new YT.Player(playerID,{NaN:YTPlayer.videoID.toString(),NaN:playerVars,NaN:{NaN:function(e){if(YTPlayer.player=e.target,!YTPlayer.isReady){YTPlayer.isReady=!0,YTPlayer.playerEl=YTPlayer.player.getIframe(),$YTPlayer.optimizeDisplay(),YTPlayer.videoID=videoID,jQuery(window).on("resize.YTP",function(){$YTPlayer.optimizeDisplay()}),YTPlayer.opt.showControls&&jQuery(YTPlayer).buildYTPControls();var r=YTPlayer.opt.startAt?YTPlayer.opt.startAt:1;YTPlayer.player.setVolume(0),jQuery(YTPlayer).muteYTPVolume(),jQuery.mbYTPlayer.checkForState(YTPlayer),YTPlayer.checkForStartAt=setInterval(function(){var e=!(!jQuery.browser.mozilla||window.MediaSource)||YTPlayer.player.getVideoLoadedFraction()>r/YTPlayer.player.getDuration();YTPlayer.player.getDuration()>0&&YTPlayer.player.getCurrentTime()>=r&&e?(clearInterval(YTPlayer.checkForStartAt),YTPlayer.player.setVolume(0),jQuery(YTPlayer).muteYTPVolume(),"function"==typeof YTPlayer.opt.onReady&&YTPlayer.opt.onReady(YTPlayer),YTPlayer.opt.mute||jQuery(YTPlayer).unmuteYTP(),YTPlayer.player.pauseVideo(),setTimeout(function(){YTPlayer.canTrigger=!0,YTPlayer.opt.autoPlay?($YTPlayer.playYTP(),$YTPlayer.css("background-image","none"),YTPlayer.wrapper.CSSAnimate({NaN:YTPlayer.isAlone?1:YTPlayer.opt.opacity},2e3)):YTPlayer.player.pauseVideo()},100)):(YTPlayer.player.playVideo(),YTPlayer.player.seekTo(r,!0))},1e3);var a=jQuery.Event("YTPReady");jQuery(YTPlayer).trigger(a)}},NaN:function(event){if("function"==typeof event.target.getPlayerState){var state=event.target.getPlayerState();if(YTPlayer.state!=state){YTPlayer.state=state;var controls=jQuery("#controlBar_"+YTPlayer.id),eventType;switch(state){case-1:eventType="YTPUnstarted";break;case 0:eventType="YTPEnd";break;case 1:eventType="YTPStart",controls.find(".mb_YTPPlaypause").html(jQuery.mbYTPlayer.controls.pause),"undefined"!=typeof _gaq&&eval(YTPlayer.opt.gaTrack)&&_gaq.push(["_trackEvent","YTPlayer","Play",YTPlayer.videoTitle||YTPlayer.videoID.toString()]),"undefined"!=typeof ga&&eval(YTPlayer.opt.gaTrack)&&ga("send","event","YTPlayer","play",YTPlayer.videoTitle||YTPlayer.videoID.toString());break;case 2:eventType="YTPPause",controls.find(".mb_YTPPlaypause").html(jQuery.mbYTPlayer.controls.play);break;case 3:jQuery.browser.chrome||YTPlayer.player.setPlaybackQuality(YTPlayer.opt.quality),eventType="YTPBuffering",jQuery.browser.chrome||YTPlayer.player.setPlaybackQuality(YTPlayer.opt.quality),controls.find(".mb_YTPPlaypause").html(jQuery.mbYTPlayer.controls.play),setTimeout(function(){controls.show(1e3)},2e3);break;case 5:eventType="YTPCued"}var YTPevent=jQuery.Event(eventType);YTPevent.time=YTPlayer.player.time,YTPlayer.canTrigger&&jQuery(YTPlayer).trigger(YTPevent)}}},NaN:function(e){var r=e.target.getPlaybackQuality(),a=jQuery.Event("YTPQualityChange");a.quality=r,jQuery(YTPlayer).trigger(a)},NaN:function(e){150==e.data&&(console.log("Embedding this video is restricted by Youtube."),YTPlayer.isPlayList&&jQuery(YTPlayer).playNext()),2==e.data&&YTPlayer.isPlayList&&jQuery(YTPlayer).playNext(),"function"==typeof YTPlayer.opt.onError&&YTPlayer.opt.onError($YTPlayer,e)}}}))}))})}else $YTPlayer.remove()}})},NaN:function(e){jQuery.browser.msie&&jQuery.browser.version<=9?("auto"==e.opt.ratio?e.opt.ratio="16/9":e.opt.ratio,e.hasData||(e.hasData=!0,setTimeout(function(){jQuery(e).trigger("YTPChanged")},100))):(jQuery.getJSON(jQuery.mbYTPlayer.locationProtocol+"//gdata.youtube.com/feeds/api/videos/"+e.videoID+"?v=2&alt=jsonc",function(r){e.dataReceived=!0,e.videoData=r.data,jQuery(e).trigger("YTPChanged");var a=jQuery.Event("YTPData");for(var t in a.prop={},e.videoData)a.prop[t]=e.videoData[t];if(jQuery(e).trigger(a),e.videoTitle=e.videoData.title,"auto"==e.opt.ratio&&(e.videoData.aspectRatio&&"widescreen"===e.videoData.aspectRatio?e.opt.ratio="16/9":e.opt.ratio="4/3"),!e.hasData&&(e.hasData=!0,e.isPlayer)){var o=e.videoData.thumbnail.hqDefault;e.opt.containment.css({NaN:"rgba(0,0,0,0.5) url("+o+") center center",NaN:"cover"})}}),setTimeout(function(){e.dataReceived||e.hasData||(e.hasData=!0,jQuery(e).trigger("YTPChanged"))},1500))},NaN:function(){return this.get(0).videoData},NaN:function(){return this.get(0).videoID||!1},NaN:function(e){var r=this.get(0);jQuery.browser.chrome||r.player.setPlaybackQuality(e)},NaN:function(e,r,a){var t=this.get(0);t.isPlayList=!0,r&&(e=jQuery.shuffle(e)),t.videoID||(t.videos=e,t.videoCounter=0,t.videoLength=e.length,jQuery(t).data("property",e[0]),jQuery(t).mb_YTPlayer()),"function"==typeof a&&jQuery(t).on("YTPChanged",function(){a(t)}),jQuery(t).on("YTPEnd",function(){jQuery(t).playNext()})},NaN:function(){var e=this.get(0);e.videoCounter++,e.videoCounter>=e.videoLength&&(e.videoCounter=0),jQuery(e.playerEl).css({NaN:0}),jQuery(e).changeMovie(e.videos[e.videoCounter])},NaN:function(){var e=this.get(0);e.videoCounter--,e.videoCounter<0&&(e.videoCounter=e.videoLength-1),jQuery(e.playerEl).css({NaN:0}),jQuery(e).changeMovie(e.videos[e.videoCounter])},NaN:function(e){var r=this.get(0);r.opt.startAt=0,r.opt.stopAt=0,r.opt.mute=!0,e&&jQuery.extend(r.opt,e),r.videoID=getYTPVideoID(r.opt.videoURL).videoID,jQuery(r).pauseYTP();var a=jQuery.browser.msie?1e3:0;if(jQuery(r.playerEl).CSSAnimate({NaN:0},a),setTimeout(function(){var e=jQuery.browser.chrome?"default":r.opt.quality;jQuery(r).getPlayer().cueVideoByUrl(encodeURI(jQuery.mbYTPlayer.locationProtocol+"//www.youtube.com/v/"+r.videoID),1,e),jQuery(r).playYTP(),jQuery(r).one("YTPStart",function(){r.wrapper.CSSAnimate({NaN:r.isAlone?1:r.opt.opacity},1e3),jQuery(r.playerEl).CSSAnimate({NaN:1},a),r.opt.startAt&&r.player.seekTo(r.opt.startAt),jQuery.mbYTPlayer.checkForState(r),r.opt.autoPlay||jQuery(r).pauseYTP()}),r.opt.mute?jQuery(r).muteYTPVolume():jQuery(r).unmuteYTP()},a),r.opt.addRaster){var t=window.retina||window.devicePixelRatio>1;r.overlay.addClass(t?"raster retina":"raster")}else r.overlay.removeClass("raster"),r.overlay.removeClass("retina");jQuery("#controlBar_"+r.id).remove(),r.opt.showControls&&jQuery(r).buildYTPControls(),jQuery.mbYTPlayer.getDataFromFeed(r),jQuery(r).optimizeDisplay()},NaN:function(){return jQuery(this).get(0).player},NaN:function(){var e=this.get(0);ytp.YTAPIReady=!1,ytp.backgroundIsInited=!1,e.isInit=!1,e.videoID=null,e.wrapper.remove(),jQuery("#controlBar_"+e.id).remove()},NaN:function(real){function RunPrefixMethod(e,r){for(var a,t,o=["webkit","moz","ms","o",""],n=0;n<o.length&&!e[a];){if(a=r,""==o[n]&&(a=a.substr(0,1).toLowerCase()+a.substr(1)),"undefined"!=(t=typeof e[a=o[n]+a]))return o=[o[n]],"function"==t?e[a]():e[a];n++}}function launchFullscreen(e){RunPrefixMethod(e,"RequestFullScreen")}function cancelFullscreen(){(RunPrefixMethod(document,"FullScreen")||RunPrefixMethod(document,"IsFullScreen"))&&RunPrefixMethod(document,"CancelFullScreen")}var YTPlayer=this.get(0);void 0===real&&(real=YTPlayer.opt.realfullscreen),real=eval(real);var controls=jQuery("#controlBar_"+YTPlayer.id),fullScreenBtn=controls.find(".mb_OnlyYT"),videoWrapper=YTPlayer.isSelf?YTPlayer.opt.containment:YTPlayer.wrapper;if(real){var fullscreenchange=jQuery.browser.mozilla?"mozfullscreenchange":jQuery.browser.webkit?"webkitfullscreenchange":"fullscreenchange";jQuery(document).off(fullscreenchange).on(fullscreenchange,function(){RunPrefixMethod(document,"IsFullScreen")||RunPrefixMethod(document,"FullScreen")?(jQuery(YTPlayer).setVideoQuality("default"),jQuery(YTPlayer).trigger("YTPFullScreenStart")):(YTPlayer.isAlone=!1,fullScreenBtn.html(jQuery.mbYTPlayer.controls.onlyYT),jQuery(YTPlayer).setVideoQuality(YTPlayer.opt.quality),videoWrapper.removeClass("fullscreen"),videoWrapper.CSSAnimate({NaN:YTPlayer.opt.opacity},500),videoWrapper.css({NaN:0}),YTPlayer.isBackground?jQuery("body").after(controls):YTPlayer.wrapper.before(controls),jQuery(window).resize(),jQuery(YTPlayer).trigger("YTPFullScreenEnd"))})}YTPlayer.isAlone?(real?cancelFullscreen():(videoWrapper.CSSAnimate({NaN:YTPlayer.opt.opacity},500),videoWrapper.css({NaN:0})),fullScreenBtn.html(jQuery.mbYTPlayer.controls.onlyYT),YTPlayer.isAlone=!1):(real?(videoWrapper.css({NaN:0}),videoWrapper.addClass("fullscreen"),launchFullscreen(videoWrapper.get(0)),setTimeout(function(){videoWrapper.CSSAnimate({NaN:1},1e3),YTPlayer.wrapper.append(controls),jQuery(YTPlayer).optimizeDisplay(),YTPlayer.player.seekTo(YTPlayer.player.getCurrentTime()+.1,!0)},500)):videoWrapper.css({NaN:1e4}).CSSAnimate({NaN:1},1e3),fullScreenBtn.html(jQuery.mbYTPlayer.controls.showSite),YTPlayer.isAlone=!0)},NaN:function(){var e=this.get(0);"undefined"!=typeof e.player&&(jQuery("#controlBar_"+e.id).find(".mb_YTPPlaypause").html(jQuery.mbYTPlayer.controls.pause),e.player.playVideo(),e.wrapper.CSSAnimate({NaN:e.isAlone?1:e.opt.opacity},2e3),jQuery(e).on("YTPStart",function(){jQuery(e).css("background-image","none")}))},NaN:function(){var e=this.get(0),r=e.opt;1==r.loop?r.loop=0:(r.startAt?e.player.seekTo(r.startAt):e.player.playVideo(),r.loop=1)},NaN:function(){var e=this.get(0);jQuery("#controlBar_"+e.id).find(".mb_YTPPlaypause").html(jQuery.mbYTPlayer.controls.play),e.player.stopVideo()},NaN:function(){var e=this.get(0);e.opt;jQuery("#controlBar_"+e.id).find(".mb_YTPPlaypause").html(jQuery.mbYTPlayer.controls.play),e.player.pauseVideo()},NaN:function(e){this.get(0).player.seekTo(e,!0)},NaN:function(e){var r=this.get(0);e||r.opt.vol||0!=r.player.getVolume()?!e&&r.player.getVolume()>0||e&&r.player.getVolume()==e?jQuery(r).muteYTPVolume():r.opt.vol=e:jQuery(r).unmuteYTP(),r.player.setVolume(r.opt.vol)},NaN:function(){var e=this.get(0);e.player.mute(),e.player.setVolume(0),jQuery("#controlBar_"+e.id).find(".mb_YTPMuteUnmute").html(jQuery.mbYTPlayer.controls.unmute),jQuery(e).addClass("isMuted"),jQuery(e).trigger("YTPMuted")},NaN:function(){var e=this.get(0);e.player.unMute(),e.player.setVolume(e.opt.vol),jQuery("#controlBar_"+e.id).find(".mb_YTPMuteUnmute").html(jQuery.mbYTPlayer.controls.mute),jQuery(e).removeClass("isMuted"),jQuery(e).trigger("YTPUnmuted")},NaN:function(){var e=this.get(0),r=jQuery("#controlBar_"+e.id),a=r.find(".mb_YTPProgress"),t=r.find(".mb_YTPLoaded"),o=r.find(".mb_YTPseekbar"),n=a.outerWidth(),l=Math.floor(e.player.getCurrentTime()),i=Math.floor(e.player.getDuration()),y=l*n/i,s=0,u=100*e.player.getVideoLoadedFraction();return t.css({NaN:s,NaN:u+"%"}),o.css({NaN:0,NaN:y}),{NaN:i,NaN:l}},NaN:function(){var YTPlayer=this.get(0),data=YTPlayer.opt;if(data.showYTLogo=data.showYTLogo||data.printUrl,!jQuery("#controlBar_"+YTPlayer.id).length){var controlBar=jQuery("<span/>").attr("id","controlBar_"+YTPlayer.id).addClass("mb_YTPBar").css({NaN:"noWrap",NaN:YTPlayer.isBackground?"fixed":"absolute",NaN:YTPlayer.isBackground?1e4:1e3}).hide();YTPlayer.controlBar=controlBar;var buttonBar=jQuery("<div/>").addClass("buttonBar"),playpause=jQuery("<span>"+jQuery.mbYTPlayer.controls.play+"</span>").addClass("mb_YTPPlaypause ytpicon").click(function(){1==YTPlayer.player.getPlayerState()?jQuery(YTPlayer).pauseYTP():jQuery(YTPlayer).playYTP()}),MuteUnmute=jQuery("<span>"+jQuery.mbYTPlayer.controls.mute+"</span>").addClass("mb_YTPMuteUnmute ytpicon").click(function(){0==YTPlayer.player.getVolume()?jQuery(YTPlayer).unmuteYTP():jQuery(YTPlayer).muteYTP()}),idx=jQuery("<span/>").addClass("mb_YTPTime"),vURL=data.videoURL?data.videoURL:"";vURL.indexOf("http")<0&&(vURL=jQuery.mbYTPlayer.locationProtocol+"//www.youtube.com/watch?v="+data.videoURL);var movieUrl=jQuery("<span/>").html(jQuery.mbYTPlayer.controls.ytLogo).addClass("mb_YTPUrl ytpicon").attr("title","view on YouTube").on("click",function(){window.open(vURL,"viewOnYT")}),onlyVideo=jQuery("<span/>").html(jQuery.mbYTPlayer.controls.onlyYT).addClass("mb_OnlyYT ytpicon").on("click",function(){jQuery(YTPlayer).fullscreen(data.realfullscreen)}),progressBar=jQuery("<div/>").addClass("mb_YTPProgress").css("position","absolute").click(function(e){timeBar.css({NaN:e.clientX-timeBar.offset().left}),YTPlayer.timeW=e.clientX-timeBar.offset().left,controlBar.find(".mb_YTPLoaded").css({NaN:0});var r=Math.floor(YTPlayer.player.getDuration());YTPlayer.goto=timeBar.outerWidth()*r/progressBar.outerWidth(),YTPlayer.player.seekTo(parseFloat(YTPlayer.goto),!0),controlBar.find(".mb_YTPLoaded").css({NaN:0})}),loadedBar=jQuery("<div/>").addClass("mb_YTPLoaded").css("position","absolute"),timeBar=jQuery("<div/>").addClass("mb_YTPseekbar").css("position","absolute");progressBar.append(loadedBar).append(timeBar),buttonBar.append(playpause).append(MuteUnmute).append(idx),data.showYTLogo&&buttonBar.append(movieUrl),(YTPlayer.isBackground||eval(YTPlayer.opt.realfullscreen)&&!YTPlayer.isBackground)&&buttonBar.append(onlyVideo),controlBar.append(buttonBar).append(progressBar),YTPlayer.isBackground?jQuery("body").after(controlBar):(controlBar.addClass("inlinePlayer"),YTPlayer.wrapper.before(controlBar))}},NaN:function(YTPlayer){var interval=YTPlayer.opt.showControls?10:1e3;clearInterval(YTPlayer.getState),YTPlayer.getState=setInterval(function(){var prog=jQuery(YTPlayer).manageYTPProgress(),$YTPlayer=jQuery(YTPlayer),controlBar=jQuery("#controlBar_"+YTPlayer.id),data=YTPlayer.opt,startAt=YTPlayer.opt.startAt?YTPlayer.opt.startAt:1,stopAt=YTPlayer.opt.stopAt>YTPlayer.opt.startAt?YTPlayer.opt.stopAt:0;if(stopAt=stopAt<YTPlayer.player.getDuration()?stopAt:0,YTPlayer.player.time!=prog.currentTime){var YTPevent=jQuery.Event("YTPTime");YTPevent.time=YTPlayer.player.time,jQuery(YTPlayer).trigger(YTPevent)}if(YTPlayer.player.time=prog.currentTime,0==YTPlayer.player.getVolume()?$YTPlayer.addClass("isMuted"):$YTPlayer.removeClass("isMuted"),YTPlayer.opt.showControls&&(prog.totalTime?controlBar.find(".mb_YTPTime").html(jQuery.mbYTPlayer.formatTime(prog.currentTime)+" / "+jQuery.mbYTPlayer.formatTime(prog.totalTime)):controlBar.find(".mb_YTPTime").html("-- : -- / -- : --")),eval(YTPlayer.opt.stopMovieOnBlur)&&(document.hasFocus()?document.hasFocus()&&!YTPlayer.hasFocus&&-1!=YTPlayer.state&&0!=YTPlayer.state&&(YTPlayer.hasFocus=!0,$YTPlayer.playYTP()):1==YTPlayer.state&&(YTPlayer.hasFocus=!1,$YTPlayer.pauseYTP())),1==YTPlayer.player.getPlayerState()&&(parseFloat(YTPlayer.player.getDuration()-3)<YTPlayer.player.getCurrentTime()||stopAt>0&&parseFloat(YTPlayer.player.getCurrentTime())>stopAt)){if(YTPlayer.isEnded)return;if(YTPlayer.isEnded=!0,setTimeout(function(){YTPlayer.isEnded=!1},2e3),YTPlayer.isPlayList){clearInterval(YTPlayer.getState);var YTPEnd=jQuery.Event("YTPEnd");return YTPEnd.time=YTPlayer.player.time,void jQuery(YTPlayer).trigger(YTPEnd)}data.loop?YTPlayer.player.seekTo(startAt,!0):(YTPlayer.player.pauseVideo(),YTPlayer.wrapper.CSSAnimate({NaN:0},1e3,function(){var e=jQuery.Event("YTPEnd");if(e.time=YTPlayer.player.time,jQuery(YTPlayer).trigger(e),YTPlayer.player.seekTo(startAt,!0),!YTPlayer.isBackground){var r=YTPlayer.videoData.thumbnail.hqDefault;jQuery(YTPlayer).css({NaN:"rgba(0,0,0,0.5) url("+r+") center center",NaN:"cover"})}}))}},interval)},NaN:function(e){var r=Math.floor(e/60),a=Math.floor(e-60*r);return(r<=9?"0"+r:r)+" : "+(a<=9?"0"+a:a)}},jQuery.fn.toggleVolume=function(){var e=this.get(0);if(e)return e.player.isMuted()?(jQuery(e).unmuteYTP(),!0):(jQuery(e).muteYTP(),!1)},jQuery.fn.optimizeDisplay=function(){var e=this.get(0),r=e.opt,a=jQuery(e.playerEl),t={},o=e.wrapper;t.width=o.outerWidth(),t.height=o.outerHeight();var n=24,l=100,i={};r.optimizeDisplay?(i.width=t.width+t.width*n/100,i.height="16/9"==r.ratio?Math.ceil(9*t.width/16):Math.ceil(3*t.width/4),i.marginTop=-(i.height-t.height)/2,i.marginLeft=-t.width*(n/2)/100,i.height<t.height&&(i.height=t.height+t.height*n/100,i.width="16/9"==r.ratio?Math.floor(16*t.height/9):Math.floor(4*t.height/3),i.marginTop=-t.height*(n/2)/100,i.marginLeft=-(i.width-t.width)/2),i.width+=l,i.height+=l,i.marginTop-=l/2,i.marginLeft-=l/2):(i.width="100%",i.height="100%",i.marginTop=0,i.marginLeft-=0),a.css({NaN:i.width,NaN:i.height,NaN:i.marginTop,NaN:i.marginLeft})},jQuery.shuffle=function(e){for(var r=e.slice(),a=r.length,t=a;t--;){var o=parseInt(Math.random()*a),n=r[t];r[t]=r[o],r[o]=n}return r},jQuery.fn.YTPlayer=jQuery.mbYTPlayer.buildPlayer,jQuery.fn.YTPlaylist=jQuery.mbYTPlayer.YTPlaylist,jQuery.fn.playNext=jQuery.mbYTPlayer.playNext,jQuery.fn.playPrev=jQuery.mbYTPlayer.playPrev,jQuery.fn.changeMovie=jQuery.mbYTPlayer.changeMovie,jQuery.fn.getVideoID=jQuery.mbYTPlayer.getVideoID,jQuery.fn.getPlayer=jQuery.mbYTPlayer.getPlayer,jQuery.fn.playerDestroy=jQuery.mbYTPlayer.playerDestroy,jQuery.fn.fullscreen=jQuery.mbYTPlayer.fullscreen,jQuery.fn.buildYTPControls=jQuery.mbYTPlayer.buildYTPControls,jQuery.fn.playYTP=jQuery.mbYTPlayer.playYTP,jQuery.fn.toggleLoops=jQuery.mbYTPlayer.toggleLoops,jQuery.fn.stopYTP=jQuery.mbYTPlayer.stopYTP,jQuery.fn.pauseYTP=jQuery.mbYTPlayer.pauseYTP,jQuery.fn.seekToYTP=jQuery.mbYTPlayer.seekToYTP,jQuery.fn.muteYTP=jQuery.mbYTPlayer.muteYTP,jQuery.fn.unmuteYTP=jQuery.mbYTPlayer.unmuteYTP,jQuery.fn.setYTPVolume=jQuery.mbYTPlayer.setYTPVolume,jQuery.fn.setVideoQuality=jQuery.mbYTPlayer.setVideoQuality,jQuery.fn.manageYTPProgress=jQuery.mbYTPlayer.manageYTPProgress,jQuery.fn.getDataFromFeed=jQuery.mbYTPlayer.getVideoData,jQuery.fn.mb_YTPlayer=jQuery.fn.YTPlayer,jQuery.fn.muteYTPVolume=jQuery.mbYTPlayer.muteYTP,jQuery.fn.unmuteYTPVolume=jQuery.mbYTPlayer.unmuteYTP}(jQuery,ytp);